{"version":3,"file":"static/webpack/static/development/pages/people.js.8b36bb4a9c347112c7b4.hot-update.js","sources":["webpack:///./src/pages/people.tsx"],"sourcesContent":["import fetch from \"isomorphic-unfetch\";\nimport { NextPageContext } from \"next\";\nimport Router from \"next/router\";\n\nexport default function People({ people }: any) {\n  return <div>{JSON.stringify(people)}</div>;\n}\n\nexport async function getServerSideProps(ctx: NextPageContext) {\n  const people = await myGet(\"http://localhost:3000/api/people\", ctx);\n  \n  return {\n    props: { people }, // will be passed to the page component as props\n  };\n}\n\nexport async function myGet(url: string, ctx: NextPageContext) {\n  const cookie = ctx.req?.headers.cookie;\n  const response = await fetch(url, {\n    headers: {\n      cookie: cookie!,\n    },\n  });\n\n  if (response.status === 401 && !ctx.req) {\n    Router.replace(\"/login\");\n    return {};\n  }\n  if (response.status === 401 && ctx.req) {\n    ctx.res?.writeHead(302, {\n      Location: \"http://localhost:3000/login\",\n    });\n    ctx.res?.end();\n    return;\n  }\n\n  const json = await response.json();\n  return json;\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AADA;AADA;AACA;AAHA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AAQA;AATA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAYA;AACA;AADA;AAGA;AAhBA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAoBA;AApBA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}