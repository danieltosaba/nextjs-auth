{"ast":null,"code":"var _jsxFileName = \"/Users/daniel/Documents/development/NEXTJS/nextjs-auth/src/pages/people.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nexport var __N_SSP = true;\nexport default function People(_ref) {\n  var people = _ref.people;\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 10\n    }\n  }, JSON.stringify(people));\n}","map":{"version":3,"sources":["/Users/daniel/Documents/development/NEXTJS/nextjs-auth/src/pages/people.tsx"],"names":["People","people","JSON","stringify"],"mappings":";;;;AAIA,eAAe,SAASA,MAAT,OAAiC;AAAA,MAAfC,MAAe,QAAfA,MAAe;AAC9C,SAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMC,IAAI,CAACC,SAAL,CAAeF,MAAf,CAAN,CAAP;AACD","sourcesContent":["import fetch from \"isomorphic-unfetch\";\nimport { NextPageContext } from \"next\";\nimport Router from \"next/router\";\n\nexport default function People({ people }: any) {\n  return <div>{JSON.stringify(people)}</div>;\n}\n\nexport async function getServerSideProps(ctx: NextPageContext) {\n  const cookie = ctx.req?.headers.cookie;\n  const response = await fetch(\"http://localhost:3000/api/people\", {\n    headers: {\n      cookie: cookie!,\n    },\n  });\n\n  console.log(\"status:\",response.status);\n  console.log(\"req:\",ctx.req);\n\n  if (response.status === 401 && !ctx.req) {\n    Router.replace(\"/login\");\n    return {};\n  }\n  if (response.status === 401 && ctx.req) {\n    ctx.res?.writeHead(302, {\n      Location: \"http://localhost:3000/login\",\n    });\n    ctx.res?.end();\n    return;\n  }\n\n  const people = await response.json();\n  return {\n    props: { people }, // will be passed to the page component as props\n  };\n}\n"]},"metadata":{},"sourceType":"module"}