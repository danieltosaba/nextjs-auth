{"ast":null,"code":"import sqlite from \"sqlite\";\nexport default async function signUp(req, res) {\n  const db = await sqlite.open(\"./mydb.sqlite\");\n\n  if (req.method === \"POST\") {\n    const statement = await db.prepare(\"INSERT INTO person (name, email, password) values(?, ?, ?)\");\n    const result = await statement.run(req.body.name, req.body.email, req.body.password);\n    result.finalize();\n    const person = await db.all(\"select * from person\");\n    res.json(person);\n  } else {\n    res.status(405).json({\n      message: \"We only support POST method\"\n    });\n  }\n}","map":{"version":3,"sources":["/Users/daniel/Documents/development/NEXTJS/nextjs-auth/src/pages/api/signup.ts"],"names":["sqlite","signUp","req","res","db","open","method","statement","prepare","result","run","body","name","email","password","finalize","person","all","json","status","message"],"mappings":"AACA,OAAOA,MAAP,MAAmB,QAAnB;AAEA,eAAe,eAAeC,MAAf,CACbC,GADa,EAEbC,GAFa,EAGb;AACA,QAAMC,EAAE,GAAG,MAAMJ,MAAM,CAACK,IAAP,CAAY,eAAZ,CAAjB;;AAEA,MAAIH,GAAG,CAACI,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAMC,SAAS,GAAG,MAAMH,EAAE,CAACI,OAAH,CACtB,4DADsB,CAAxB;AAGA,UAAMC,MAAM,GAAG,MAAMF,SAAS,CAACG,GAAV,CACnBR,GAAG,CAACS,IAAJ,CAASC,IADU,EAEnBV,GAAG,CAACS,IAAJ,CAASE,KAFU,EAGnBX,GAAG,CAACS,IAAJ,CAASG,QAHU,CAArB;AAKAL,IAAAA,MAAM,CAACM,QAAP;AAEA,UAAMC,MAAM,GAAG,MAAMZ,EAAE,CAACa,GAAH,CAAO,sBAAP,CAArB;AACAd,IAAAA,GAAG,CAACe,IAAJ,CAASF,MAAT;AACD,GAbD,MAaO;AACLb,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,MAAAA,OAAO,EAAE;AAAX,KAArB;AACD;AACF","sourcesContent":["import { NextApiRequest, NextApiResponse } from \"next\";\nimport sqlite from \"sqlite\";\n\nexport default async function signUp(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  const db = await sqlite.open(\"./mydb.sqlite\");\n\n  if (req.method === \"POST\") {\n    const statement = await db.prepare(\n      \"INSERT INTO person (name, email, password) values(?, ?, ?)\"\n    );\n    const result = await statement.run(\n      req.body.name,\n      req.body.email,\n      req.body.password\n    );\n    result.finalize();\n\n    const person = await db.all(\"select * from person\");\n    res.json(person);\n  } else {\n    res.status(405).json({ message: \"We only support POST method\" });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}